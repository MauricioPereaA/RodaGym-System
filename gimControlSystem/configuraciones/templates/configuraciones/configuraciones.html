{% extends "base.html" %}
{% load static %}
  
{% block content %}
<div class="main-content">
    <div class="container-fluid">
        <h2 class="title-large">Configuraciones</h2>
        <hr style="background-color: black; height: 3px;">
        <div class="d-grid gap-2 col-6 mx-auto mb-4">
            <a href="{% url 'configuraciones:reportes' %}" class="btn btn-primary btn-lg">Reportes</a>
            <a href="{% url 'configuraciones:alta_usuario' %}" class="btn btn-primary btn-lg">Agregar Nuevo Trabajador</a>
            <a href="{% url 'configuraciones:reimprimir_ticket' %}" class="btn btn-primary btn-lg">Reimpresion de Tickets</a>
        </div>
        <!-- Formulario para configurar mensajes globales -->
        <form method="post" action="/configuraciones/">
            {% csrf_token %}
            <div class="form-check form-switch">
                <input class="form-check-input" type="checkbox" id="mensajeGlobalSwitch" name="mensaje_global" {% if configuracion.mensaje_global %}checked{% endif %}>
                <label class="form-check-label" for="mensajeGlobalSwitch">Activar Mensajes Globales</label>
            </div>

            <div class="form-group" style="margin-top: 20px;">
                <label for="mensajeGlobalText">Mensaje Global</label>
                <textarea class="form-control" style="width: 430px; height: 300px;" id="mensajeGlobalText" name="mensaje_global_str" rows="3" {% if not configuracion.mensaje_global %}disabled{% endif %}>{{ configuracion.mensaje_global_str }}</textarea>
            </div>

            <button type="submit" class="btn btn-primary" style="margin-top: 20px;">Guardar</button>
        </form>
    </div>
</div>
<script>
    document.addEventListener('DOMContentLoaded', function() {
        const switchElement = document.getElementById('mensajeGlobalSwitch');
        const textAreaElement = document.getElementById('mensajeGlobalText');
    
        switchElement.addEventListener('change', function() {
            if (switchElement.checked) {
                textAreaElement.removeAttribute('disabled');
            } else {
                textAreaElement.setAttribute('disabled', 'disabled');
            }
        });
    });
</script>
{% endblock %}
